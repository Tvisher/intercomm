@@include('./html/header.html')
<main>
	<section>
		<div class="container">
			<div class="error-page get-check-list-page">
				<h1 style="margin-bottom:16px ;">Как убедить руководителя говорить <br>с сотрудниками на понятном им
					языке?</h1>
				<p class="get-check-list-page__descr" style="font-size: 23px;margin-bottom: 50px;">Собрали Топ-5
					советов, которые помогут грамотно внести и
					согласовать правки!</p>
				<div class="error-page__image">
					<svg width="687" height="416" viewBox="0 0 687 416" fill="none" xmlns="http://www.w3.org/2000/svg">
						<circle cx="403.046" cy="208" r="208" fill="url(#paint0_angular_3088_19968)" />
						<circle cx="154.546" cy="237.5" r="154.5" fill="url(#paint1_angular_3088_19968)" />
						<path fill-rule="evenodd" clip-rule="evenodd"
							d="M180.165 245.214L206.935 216.45L243.43 250.415L155.238 345.174L67.0459 250.415L103.54 216.45L130.311 245.214V130H180.165V245.214Z"
							fill="url(#paint2_linear_3088_19968)" />
						<path d="M413.621 172.336L413.621 385.149L284.736 300.347L284.736 87.5749L413.621 172.336Z"
							fill="url(#paint3_linear_3088_19968)" />
						<path d="M468.682 144.063L468.681 356.875L339.796 272.074L339.796 59.3015L468.682 144.063Z"
							fill="url(#paint4_linear_3088_19968)" />
						<path d="M525.233 115.781L525.233 328.594L396.348 243.792L396.348 31.0203L525.233 115.781Z"
							fill="url(#paint5_linear_3088_19968)" />
						<defs>
							<radialGradient id="paint0_angular_3088_19968" cx="0" cy="0" r="1"
								gradientUnits="userSpaceOnUse"
								gradientTransform="translate(403.046 208) rotate(135) scale(278.295)">
								<stop stop-color="#610865" />
								<stop offset="1" stop-color="#BD0C5A" />
							</radialGradient>
							<radialGradient id="paint1_angular_3088_19968" cx="0" cy="0" r="1"
								gradientUnits="userSpaceOnUse"
								gradientTransform="translate(154.546 237.5) scale(198.5)">
								<stop stop-color="#610865" />
								<stop offset="1" stop-color="#BD0C5A" />
							</radialGradient>
							<linearGradient id="paint2_linear_3088_19968" x1="67.0459" y1="122.33" x2="67.047"
								y2="400.479" gradientUnits="userSpaceOnUse">
								<stop offset="0.0261371" stop-color="white" />
								<stop offset="1" stop-color="white" stop-opacity="0" />
							</linearGradient>
							<linearGradient id="paint3_linear_3088_19968" x1="307.078" y1="28.7544" x2="467.976"
								y2="416.087" gradientUnits="userSpaceOnUse">
								<stop offset="0.0261371" stop-color="#FCFAFC" />
								<stop offset="1" stop-color="white" stop-opacity="0" />
							</linearGradient>
							<linearGradient id="paint4_linear_3088_19968" x1="362.139" y1="0.480917" x2="523.037"
								y2="387.814" gradientUnits="userSpaceOnUse">
								<stop offset="0.0261371" stop-color="#FCFAFC" />
								<stop offset="1" stop-color="white" stop-opacity="0" />
							</linearGradient>
							<linearGradient id="paint5_linear_3088_19968" x1="418.69" y1="-27.8003" x2="579.589"
								y2="359.533" gradientUnits="userSpaceOnUse">
								<stop offset="0.0261371" stop-color="#FCFAFC" />
								<stop offset="1" stop-color="white" stop-opacity="0" />
							</linearGradient>
						</defs>
					</svg>

				</div>
				<a style="max-width: 370px;" href="javascript:void(0)" data-open-modal="get-check-list"
					class="red-btn"><span>Получить
						чек-лист</span></a>
			</div>
		</div>
	</section>
</main>
<div class="modal-template get-check-list-modal" data-modal-type="get-check-list">
	<div class="modal-template__content">
		<div class="modal-template__close"></div>
		<div class="modal-template__ico">
			<svg width="83" height="83" viewBox="0 0 83 83" fill="none" xmlns="http://www.w3.org/2000/svg">
				<rect x="1.07227" y="9" width="80" height="63" fill="url(#paint0_linear_3088_20113)" />
				<path d="M64.0723 9H1.07227V72L64.0723 9Z" fill="url(#paint1_linear_3088_20113)" />
				<path d="M18.0723 9H81.0723V72L18.0723 9Z" fill="url(#paint2_linear_3088_20113)" />
				<path d="M1.07227 9H81.0723L41.0723 49L1.07227 9Z" fill="#FA0056" />
				<defs>
					<linearGradient id="paint0_linear_3088_20113" x1="59.5382" y1="9.38776" x2="-11.8331" y2="54.7029"
						gradientUnits="userSpaceOnUse">
						<stop stop-color="#AD073D" stop-opacity="0" />
						<stop offset="1" stop-color="#AD073D" />
					</linearGradient>
					<linearGradient id="paint1_linear_3088_20113" x1="47.1142" y1="9.38776" x2="-15.9758" y2="40.9328"
						gradientUnits="userSpaceOnUse">
						<stop stop-color="#AD073D" stop-opacity="0" />
						<stop offset="1" stop-color="#AD073D" />
					</linearGradient>
					<linearGradient id="paint2_linear_3088_20113" x1="35.0303" y1="9.38776" x2="98.1203" y2="40.9328"
						gradientUnits="userSpaceOnUse">
						<stop stop-color="#AD073D" stop-opacity="0" />
						<stop offset="1" stop-color="#AD073D" />
					</linearGradient>
				</defs>
			</svg>

		</div>
		<span class="modal-title">Укажите почту, чтобы <br> получить чек-лист</span>
		<form action="#" class="modal-form get-check-list__form	">
			<label class="modal-field">
				<input class="modal-field__input" placeholder="Введите E-mail" type="text" name="email"
					autocomplete="email">
				<span class="err">Укажите корректный Email</span>
			</label>
			<label class="inner-form__agree">
				<input type="checkbox" name="form-agree" class="form__agree-checkbox">
				<div class="form-agree__text">Даю согласие на обработку моих персональных данных в соответствии с
					законом №152-ФЗ «О персональных данных» от 27.07.2006 и <a class="form-agree__link" target="_blank"
						href="/soglasie/">Политикой Компании</a> в области защиты
					персональных данных, а также на получение рекламных и информационных рассылок</div>
			</label>

			<button type="submit" class="red-btn submit__btn"><span>Отправить</span></button>
		</form>
	</div>
	<div class="modal-template__content form-complite-screen">
		<div class="modal-template__close"></div>
		<div class="modal-template__ico">
			<svg width="83" height="83" viewBox="0 0 83 83" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M24.0645 28.7665V2.55469C31.7609 2.55469 38 8.79382 38 16.4902V70.5547H30C19.5066 70.5547 11 62.0481 11 51.5547V41.8253L24.0645 28.7665Z"
					fill="#FA0056" />
				<path d="M25 28.5547H74L61.75 70.5547H25V28.5547Z" fill="url(#paint0_linear_3088_19980)" />
				<defs>
					<linearGradient id="paint0_linear_3088_19980" x1="32.4375" y1="36.8672" x2="80.2737" y2="48.1984"
						gradientUnits="userSpaceOnUse">
						<stop stop-color="#AD073D" stop-opacity="0" />
						<stop offset="1" stop-color="#AD073D" />
					</linearGradient>
				</defs>
			</svg>
		</div>
		<span class="modal-title">Чек-лист был отправлен на указанный e-mail</span>
	</div>
</div>

<style>
	.get-check-list-modal .inner-form__agree .form-agree__text::before {
		top: 0;
		transform: none;
	}

	.get-check-list-modal .inner-form__agree .form-agree__text::after {
		top: 3px;
		transform: none;
	}

	.get-check-list-modal.modal-template .modal-template__content {
		background: #EBF4FF;
	}

	.get-check-list-modal .modal-title {
		color: #333333;
		text-align: left;
		margin-bottom: 20px;
	}

	.get-check-list-modal .modal-template__content {
		padding: 30px;
	}

	.get-check-list-modal .modal-template__ico {
		width: 82px;
		height: 82px;
		display: flex;
		align-items: center;
		justify-content: center;
		margin-bottom: 20px;
	}

	.get-check-list-modal .err {
		font-size: 12px;
		color: red;
		display: none;
	}

	.get-check-list-modal .modal-field.has-err .err {
		display: block;
	}

	.modal-template__content.form-complite-screen {
		display: none;
	}

	.get-check-list-modal .modal-field.has-err .modal-field__input {
		border-color: red;
	}

	.get-check-list-modal .inner-form__agree.has-err .form-agree__text {
		color: red;
	}

	.get-check-list-modal.form-complite .modal-template__content {
		display: none;
	}

	.get-check-list-modal.form-complite .modal-template__content.form-complite-screen {
		display: block;
	}

	.error-page__image svg {
		width: 100%;
		height: auto;
	}

	@media (max-width: 576px) {
		.get-check-list-page h1 {
			font-size: 26px;
		}

		.get-check-list-page__descr {
			font-size: 18px !important;
			margin-bottom: 20px !important;
		}
	}

	.get-check-list-modal .inner-form__agree .form-agree__text {
		display: block;
	}

	.get-check-list-modal .form-agree__link {
		margin: 0;
	}

	.get-check-list__form.sending .submit__btn {
		cursor: progress;
	}
</style>

<script>
	const EMAIL_REGEXP = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([^<>()[\]\\.,;:\s@"]+\.)+[^<>()[\]\\.,;:\s@"]{2,})$/iu;
	function isEmailValid(value) {
		return EMAIL_REGEXP.test(value);
	}
	const getCheckListForm = document.querySelector('.get-check-list__form');
	const emailFiled = getCheckListForm.querySelector('.modal-field__input');
	const agreementCb = getCheckListForm.querySelector('.form__agree-checkbox');
	emailFiled.addEventListener('input', (e) => {
		emailFiled.closest('.modal-field').classList.remove('has-err')
	});
	agreementCb.addEventListener('change', (e) => {
		agreementCb.closest('.inner-form__agree').classList.remove('has-err')
	});
	getCheckListForm.addEventListener('submit', (e) => {
		e.preventDefault();
		if (getCheckListForm.classList.contains('sending')) return

		if (!isEmailValid(emailFiled.value.trim())) {
			emailFiled.closest('.modal-field').classList.add('has-err')
		}
		if (!agreementCb.checked) {
			agreementCb.closest('.inner-form__agree').classList.add('has-err')
		}
		const errors = getCheckListForm.querySelector('.has-err');
		if (errors) return;
		getCheckListForm.classList.add('sending')
		const formData = {
			email: emailFiled.value.trim()
		};
		// Отправка данных на сервак
		$.ajax({ // инициaлизируeм ajax зaпрoс
			type: 'POST', // oтпрaвляeм в POST фoрмaтe, мoжнo GET
			url: '/ajax/somefile.php', // путь дo oбрaбoтчикa, у нaс oн лeжит в тoй жe пaпкe
			dataType: 'json', // oтвeт ждeм в json фoрмaтe
			data: formData, // дaнныe для oтпрaвки
			success: function (data) { // сoбытиe пoслe удaчнoгo oбрaщeния к сeрвeру и пoлучeния oтвeтa
				document.querySelector('.get-check-list-modal')
					.classList.add("form-complite");
				getCheckListForm.classList.remove('sending')
				getCheckListForm.reset();
			},
			error: function (xhr, ajaxOptions, thrownError) { // в случae нeудaчнoгo зaвeршeния зaпрoсa к сeрвeру
				alert(xhr.status); // пoкaжeм oтвeт сeрвeрa
				alert(thrownError); // и тeкст oшибки
			},
		});

	})
</script>


@@include('./html/footer.html')